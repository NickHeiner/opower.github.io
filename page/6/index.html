<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="Opower Engineering Blog">
        <meta name="author" content="Opower's Engineering Team">

        <link rel="alternate" type="application/rss+xml" title="Opower Engineering Blog" href="/feed.xml" />

        <title>Opower | Engineering Blog</title>

        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="/css/bootstrap.min.css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Pluggy Font -->
        <link rel="stylesheet" href="/css/pluggyfont.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/custom.css">

    </head>

    <body>

    <!-- Wraps page content to push the footer down -->
    <div id="wrap">

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">OP<b>O</b>WER</a>
                <div class="nav-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/">Home</a></li>
                        <li><a href="/archive.html">Archive</a></li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-lg-8">

                <div class="page-header">
  <h1>Blog Posts</h1>
</div>
<div class="posts">
  
  <div class="post">
    <h2><a href="/2010/04/30/alfresco-3-3-lunch-learn">Alfresco 3.3 Lunch & Learn</a></h2>
    <p class="meta pull-right">Written on April 30, 2010 by <a href="/authors/tom-vaughan">Tom Vaughan</a>
</p>
    <div class="clearfix"></div>
    <div class="post-content">
    <p>I attended the Reston, VA &ldquo;Alfresco 3.3 lunch &amp; learn&rdquo; seminar this week, hosted by the generous folks over at <a href="http://www.siteworx.com/">SiteWorx</a>.  I have a couple years as &ldquo;CMS guru&rdquo; at some previous jobs so in addition to being interested in the field, I&rsquo;m also the support guy in-house for our CMS needs.</p>

<p>We here at OPOWER use Alfresco Community 3.2 as a glorified &ldquo;XML editing tool&rdquo; that was easy to setup, configure and hand over to the business to allow them to contribute XML-based content that our applications can consume.  As a F/LOSS solution, it&rsquo;s fit our needs pretty well and is generally a low-maintenance piece of our infrastructure.</p>

<p>I attribute my &ldquo;low maintenance&rdquo; characterization of an Alfresco installation mostly to the patience of my small user base, who are very accommodating to the quirks and limitations of the installed (and neglected) instance.</p>

<p>The 3.3 lunch and learn was intro&rsquo;d by Chris from SiteWorx who surveyed the CMS landscape and equated the emerging CMIS spec as &ldquo;content&rsquo;s ODBC&rdquo; which I thought to be a quite fitting analogy.</p>

<p>Richard Im from Alfresco then spoke for about 45 minutes about the new features Alfresco 3.3 contained:</p>

<h3 id="wcm-improvements">WCM Improvements</h3>

<ul>
  <li>new web-based editor, reminiscent of Interwoven&rsquo;s in-context editor from the 6.5/7.0 era</li>
  <li>new bi-directional deployment capabilities (including addition of &ldquo;delivery server&rdquo; infrastructure possibilities like several other CMS offerings)</li>
  <li>&ldquo;Straight through&rdquo; publishing without workflows</li>
  <li>google-like search on metadata attributes</li>
</ul>

<h3 id="share">Share</h3>

<ul>
  <li>Evolving share into more of a bit-for-bit replacement of the &ldquo;traditional&rdquo; UI (which Richard referred to as &ldquo;DM&rdquo;&hellip; &ldquo;document manager?&rdquo;)</li>
  <li>Permission control a la DM</li>
  <li>Rules and Actions just like in DM</li>
  <li>Data Lists (like Share Point&rsquo;s project lists)</li>
</ul>

<p>I asked the question: &ldquo;what&rsquo;s the medium-term road map for DM, if Alfresco seems intent on mirroring all(?) functionality in the traditional UI via the /share context?&rdquo;  Richard wouldn&rsquo;t definitively say that the traditional app is going to be deprecated any time soon, but it certainly appears that way&hellip;</p>

<h3 id="integration-improvements">&ldquo;Integration&rdquo; improvements</h3>

<p>I think this suite of improvements is geared towards the enterprise crowd:</p>

<ul>
  <li>Full CMIS 1.0 spec implemented as of 3.3 (the only open source implementation known to do so)</li>
  <li>ACLs</li>
  <li>Change Logs</li>
  <li>Additional SOA/REST services and support</li>
  <li>Ability to save off google docs in alfresco for management (!)</li>
</ul>

<p>My big take-aways from the lunch and Q&amp;A session was that Alfresco&rsquo;s 3.3 feature list and 3.4 direction seem to put them on more of a competitive footing with monster ECM vendors like Interwoven.  It&rsquo;s maybe an odd direction for an open source project to steer because while Alfresco certainly employs their own development team, I&rsquo;m not sure how much community interest there is in contributing to some of the more mundane enterprise ECM concerns that need to be built or integrated.  On the other hand, Alfresco, Inc. does survive with enterprise support contracts that smaller shops like mine are unlikely to ever pay top-dollar for, so maybe it&rsquo;s a long term survival strategy.</p>

<p>Long term, I&rsquo;m interested in exploring architectures available to us with a SOA-enabled CMIS layer and eventually ditch the custom-DAO layer we&rsquo;re running right now against Alfresco-exported XML flat files.  Even if that never happens, it&rsquo;s exciting to see the kinds of complexity that open source projects are able to attack.</p>

    </div>
  </div>
  
  <div class="post">
    <h2><a href="/2010/01/19/tie-tuesday-more-fun-that-it-sounds">Tie Tuesday - more fun that it sounds</a></h2>
    <p class="meta pull-right">Written on January 19, 2010 by <a href="/authors/dave-copeland">Dave Copeland</a>
</p>
    <div class="clearfix"></div>
    <div class="post-content">
    <p>The developers have an informal &ldquo;Tie Tuesday&rdquo; each work.  It&rsquo;s exactly what it sounds like.  And, since you asked, yes, it is more fun to wear a tie when you don&rsquo;t have to.  Not everyone does it every week, but this week, we had the best participation yet:</p>

<p><img src="/img/our-opower-mascot-on-tie-tuesday.jpeg" alt="Riley Dawg participates in tie tuesday" /></p>


    </div>
  </div>
  
  <div class="post">
    <h2><a href="/2009/11/24/locking-screens-on-macs-with-the-keyboard">Locking screens on Macs with the keyboard</a></h2>
    <p class="meta pull-right">Written on November 24, 2009 by <a href="/authors/charles-koppelman">Charles Koppelman</a>
</p>
    <div class="clearfix"></div>
    <div class="post-content">
    <p>Desktop security is a big issue when you have access to massive amounts of data.  As far as plain old terminal security, locking your computer while you&rsquo;re away is a pretty basic rule.</p>

<p>We have lots of OSes around the office here - Ubuntu, Windows, and OSX.  Of those, Ubuntu and Windows natively provide a way to lock your desktop with a keystroke (Win+L or Ctrl+Alt+Del, Enter on Windows and Ctrl+Alt+L on Ubuntu).  Strangely, Mac gives no easy way to lock your desktop.</p>

<p>We&rsquo;ve been using HotCorners for the screen saver, but who wants to touch the mouse if you don&rsquo;t have to (especially when you&rsquo;re racing to grab a free lunch)?</p>

<p>Enter <a href="http://www.macupdate.com/info.php/id/14831">Quicksilver</a>, everyone&rsquo;s favorite application interface.  (There are all sorts of things you can do with Quicksilver and its various plug-ins, but you can look that up yourself.) To set up a keyboard shortcut with Quicksilver to lock your screen (hat tip to <a href="http://www.brynary.com/2007/4/11/mac-tip-keyboard-shortcut-for-screen-saver">Bryan Helmkamp</a>):</p>

<ol>
  <li>
    <p>Create a symbolic link to your screen saver application:</p>

    <pre><code>$ sudo ln -s /System/Library/Frameworks/ScreenSaver.framework/Versions/\
     Current/Resources/ScreenSaverEngine.app/ \
     /Applications/Screen\ Saver.app
</code></pre>
  </li>
  <li>Quicksilver -&gt; Triggers -&gt; Custom Triggers</li>
  <li>Add a Hotkey</li>
  <li>Find the ScreenSaverEngine by typing and press enter</li>
  <li>Double-click the cell in the Trigger column</li>
  <li>Choose your hotkey (I like Ctrl+Cmd+\ since it&rsquo;s almost Ctrl+Alt+Del</li>
  <li>Close the window (you may also need to restart Quicksilver)</li>
</ol>

<p>Now set up your System Prefs in Security -&gt; General to require a password immediately after screen saver begins and you&rsquo;re set.</p>

<p>Sadly, you need to do this or your screen saver will awake as soon as you release your Quicksilver shortcut.  This even happens if you set Quicksilver to launch screen saver &ldquo;On Release&rdquo;.</p>

<p>Anyway, after that, lock screen is just a keystroke away.</p>

    </div>
  </div>
  
  <div class="post">
    <h2><a href="/2009/11/16/when-adding-more-threads-makes-it-all-slower">When adding more threads makes it all slower</a></h2>
    <p class="meta pull-right">Written on November 16, 2009 by <a href="/authors/dave-copeland">Dave Copeland</a>
</p>
    <div class="clearfix"></div>
    <div class="post-content">
    <p>I&rsquo;ve been working on a new feature that requires analysis of each individual&rsquo;s entire energy-use history.  In other words, I have a process that will touch <strong>every single bit of data</strong> in our database. This should be a rare thing, so if it takes a while, it&rsquo;s not that big of a deal.  My initial implementation was on track to complete in&hellip;11 days.</p>

<p>My first thought was: there&rsquo;s lots of blocking reading and writing from the database, so adding some threads should speed things up.  While one thread was analyzing Bob&rsquo;s energy data, another could be fetching Mary&rsquo;s, while another could be updating Joe&rsquo;s meta-data with the results.  Or so I thought.</p>

<p>The more threads I added, the slower the entire thing became.  It turned out that <strong>the fastest implementation was a single-threaded one</strong>.  But why?  It all has to do with the diminishing returns one gets from scaling out.</p>

<p>If you think of a task as having a serial component, which cannot be broken up concurrently, and then multiple tasks which <strong>can</strong> be done concurrently, we can analyze the returns we get by increasing the number of available processors (threads, in my case).  This is <a href="http://en.wikipedia.org/wiki/Amdahl%27s_law">Amdahl&rsquo;s Law</a> and is exemplified by the following equation (where &ldquo;x&rdquo; is the number of processors or threads, and &ldquo;s&rdquo; is the percentage of your overall task that must be serialized; &ldquo;y&rdquo; is the increase in speed you will see from scaling).
<img src="/img/amdahl.png" alt="Amdahl's Equation" /></p>

<p>When you graph this, it&rsquo;s pretty obvious that there are diminishing returns to adding more threads/processors (the graph below assumes that 90% of the overall job can be done concurrently).  As we add threads, we get less and less of a gain in speed.
But there&rsquo;s still a gain to get, so what happened to me?</p>

<p><img src="/img/Picture-3-300x106.png" alt="Graph of Amdahl's Equation with 10% of our task serialized" /></p>

<p>Amdahl&rsquo;s law is actually pretty optimistic.  It doesn&rsquo;t account for the overhead required to synchronize the shared data.  If we account for this, with a new value &ldquo;k&rdquo; ( the percentage penalty for maintaining consistency), we see that increasing our processors/threads actually starts to hurt us (this equation is in red)!</p>

<p><img src="/img/Coherence-300x105.png" alt="Taking shared state synchronization into account" /></p>

<p>In my case, almost all of this synchronization is happening within the database; it turns out that almost all the time my process needs is accessing data from the database.  So, I dialed it down to only one thread, and we should be done early next week.</p>

    </div>
  </div>
  
  <div class="post">
    <h2><a href="/2009/10/30/moving-day">Moving Day</a></h2>
    <p class="meta pull-right">Written on October 30, 2009 by <a href="/authors/tom-vaughan">Tom Vaughan</a>
</p>
    <div class="clearfix"></div>
    <div class="post-content">
    <p>We officially out-grew our Rosslyn space today and moved in to a new space right next to the Court House metro stop.</p>

<p><img src="/img/movingday_kitchen1-300x226.png" alt="movingday_kitchen" /></p>

<p>We&rsquo;ve got a new kitchen area that&rsquo;s big enough to hold the company for a stand-up meeting&hellip;we haven&rsquo;t had that capability for what seems like forever.   There&rsquo;s a pantry off to the left of the image (not shown) stocked with drinks, chips, pens and pads.</p>

<p><img src="/img/movingday_lobby-300x235.png" alt="movingday_lobby" /></p>

<p>We&rsquo;ve got a nice lobby area too&hellip;through the windows in the background one can see the National Cathedral, Georgetown and most of Northwest DC. One of the things we&rsquo;re all looking forward to most about the new space is the number of break away areas and conference rooms.</p>

<p><img src="/img/movingday_sasquatch-225x300.png" alt="movingday_sasquatch" /></p>

<p>Our working space is, as you can see, very open.  In the old office, that was occasionally annoying because sound echoed off the relatively confined space and amplified the drone of office sounds.  This space is well carpeted and more &ldquo;open&rdquo; so it seems quite a bit quieter.</p>

<p>The guy in the middle of this picture actually does the &ldquo;Messin&rsquo; with Sasquatch&rdquo; series of commercials for Jack Links Beef Jerkey.  He got the part because he needed less time in costume than the other actors.</p>

<p>The new location means a whole new suite of lunch places to try out.  That&rsquo;s a relief because the Chop&rsquo;t -&gt; Chipotle -&gt; Chop&rsquo;t cycle was wearing pretty thin back in Rosslyn.</p>

    </div>
  </div>
  
</div>

<ul class="pager">
  
  <li class="previous"><a href="/page/7">&larr; Older</a></li>
  
  
  <li class="next"><a href="/page/5">Newer &rarr;</a></li>
  
</ul>


                </div>
                <div class="sidebar col-lg-4">
                    <div class="panel">
                        <div class="panel-heading">
                            <h3 class="panel-title">Opower Projects</h3>
                        </div>
                        <ul class="list-group project-list">
                            <li class="project list-group-item" repo="opower/elroi"></li>
                            <li class="project list-group-item" repo="opower/sensu-metrics-relay"></li>
                            <li class="project list-group-item" repo="opower/jpile"></li>
                        </ul> <!-- /.list-group -->
                    </div> <!-- /.panel -->
                    <div class="panel">
                        <div class="panel-heading">
                            <h3 class="panel-title">Personal Projects</h3>
                        </div>
                        <ul class="list-group project-list">
                            <li class="project list-group-item" repo="dylang/shortid"></li>
                            <li class="project list-group-item" repo="seancolyer/gmail-crypt"></li>
                        </ul> <!-- /.list-group -->
                    </div> <!-- /.panel -->
                </div>

            </div>
        </div><!-- /.container -->

    </div><!-- /#wrap -->

    <div id="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    &copy; 2013 <a href="http://opower.com">Opower</a> &reg;
                    All content represents the opinion of the author and does not represent Opower.<br/>
                    <a href="http://opower.com/company/privacy-policy/">Privacy</a> :
                    <a href="http://opower.com/company/terms/">Terms</a>
                </div>
                <div class="col-lg-6">
                    <ul class="pull-right">
                        <li><a href="http://github.com/opower">Github</a></li>
                        <li><a href="http://twitter.com/opower">Twitter</a></li>
                        <li><a href="http://www.linkedin.com/company/opower">LinkedIn</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

  </body>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/live-repos.js"></script>
</html>
